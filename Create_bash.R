#options(scipen = 999)
param<-read.table("seeds.txt",stringsAsFactors = F,comment.char = "")

for(x in 1:nrow(param)){
  for(y in 1:10){
    line = stringr::str_flatten(c(param[x,c(1:2)],floor(runif(1,1e12,9e12)),param[x,c(4:8)]),collapse=" ")
    write(line,file = "seeds2.txt",append = T)
  }
}

for(i in 1:length(param$V3)){
fileConn<-file(print(paste(param$V3[i],".slurm",sep="")))

writeLines(c("#!/bin/bash",
             "#SBATCH --nodes=1",
             "#SBATCH --tasks-per-node=1",
             paste("#SBATCH --job-name=",paste(param$V3[i]),sep=""),
             "#SBATCH --mem=100Gb",
             "#SBATCH --partition=general",
             "#SBATCH --mail-user=a.laruson@northeastern.edu",
             "#SBATCH --mail-type=ALL",
             paste("#SBATCH --output=",paste(param$V3[i]),".log",sep=""),
             paste("#SBATCH --error=",paste(param$V3[i]),".error",sep=""),
             "module load lotterhos/2019-11-15",
             stringr::str_flatten(param[i,1:6],collapse = " "),
             paste("python3 src/Pyslim_code/TSR_time_AJL.py results/SLiM_output/TSR_files/",param$V3[i],"*",sep=""),
             paste("Rscript --vanilla  TTT_VCF_analysis_NL.R",param$V3[i])
             ), fileConn)
close(fileConn)
}


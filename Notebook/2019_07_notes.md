## July  ##
### 20190705 ###

Comparing the recapitation times of different matrix sizes at 1 and 2 timepoints, between 10 and 100 ind. per pop. 

At a population size of 10 it's clear that the recapitation proceeds at a reasonable time frame (20-30 min. for a 10x10 matrix), while the pop. size of 100 completes for a 6x6 matrix in 40-60 min. The difference between 1 and 2 timepoints is negligble as it fluctuates which one took longer (at least for matrixes smaller than 10x10). 
![image](https://github.com/TestTheTests/TTT_Offset_Vulnerability_GF_Sims/blob/master/Notebook/img/Recap_time.png) 


For a population size of 100 it does seem unfeasible to attempt a recapitation for a 10x10 matrix, with an extrapolated time of about 9 months running on my macbook. 
![image](https://github.com/TestTheTests/TTT_Offset_Vulnerability_GF_Sims/blob/master/Notebook/img/Recap_time_100_extrap.png)

While for a population of size 10 in a 10x10 matrix should finish recapitating in just about 2 hours, and wether one or two time points are considered shouldn't really affect the run time.
![image](https://github.com/TestTheTests/TTT_Offset_Vulnerability_GF_Sims/blob/master/Notebook/img/Recap_time_10_extrap.png)


And that's almost exactly how long it took to run it when I actually generated the 10x10 tree sequence file. But when I increased the recombination rate from 10<sup>-8</sup> to 10<sup>-5</sup> (but keept the migration rate high at 0.2) it didn't finish even after running it over the weekend.
  
### 20190708 ###

After revisiting a discussion with Peter about the Ne parameter in the recapitate function, I seem to have been multiplying the effective population size by a 101 each time I ran the function (100 populations + 1 ancestral). So the actual times reported above are for when recaptiate() considered an effective population size of over 10,000 for the 10x10 "Pop. size = 10" and 100,000 when "Pop. size = 1000". 

So that was certainly slowing it down, but it's clear that recombination rate is having a big effect on the recapitate time, apparently much more so than migration rate: with an appropiate Ne parameter, 10<sup>-8</sup> recombination rate, and with a 0.05 mig. rate recapitate ran quite quickly on the cluster, while with 10<sup>-5</sup> recombination rate, and 0.05 mig. rate we're several hours in on the cluster and counting...

### 20190715 ###
Previous subsetting of the TSR objects in Pyslim was apparently not outputting properly subsetted individuals (was still writing out VCF files of of both T1 and T2 indviduals). Pyslim code has been updated and proper comments added so that it should now be outputting properly time subset individuals in the VCF files. 

Defiance cluster is still somehow not updating pyslim properly (.individuals_alive_at() command which was fixed in the last upgrade still doesn't work, despite multiple re-installs). Pyslim code produces correct files on personal computer.

### 20190719 ###
Goals for late July/August:

Get simulations running on cluster (have contacted Discovery regarding installation of all python packages necessary)

Recombination and mutation rate justifications have solid justifications; write out justifications for environmental shift rate, and selection coefficient. Migration rate is explored at multiple levels.

Run a Wright-Fisher model (single and multi) with varying population sizes (Column 1 = 100, Column 2 = 50, Column 3 = 100, etc.) and no selection (no M2/QTNs). Also, generate a SLiM code with similarly no selection where initial population size is randomly drawn from a uniform distribution from 10 to 100.

Run five replicates of single- and multi-locus Wright-Fisher and non-Wright Fisher models (common garden fitness matrix can be output during regular simulation; will compare to make sure it’s not affecting regular output results) – That’s 20 runs total. 

Verify R script is outputting correct data summaries (individual loci summaries, population level summaries, whole simulation summaries; see https://github.com/TestTheTests/TTT_Offset_Vulnerability_GF_Sims/blob/master/Notebook/2019_06_notes.md)

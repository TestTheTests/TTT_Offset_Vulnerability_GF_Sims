## 20191001
The common garden output had to be restructured, and should now be more streamlined. Output is now directly incorporates SLiM's fitness callback function, but because fitness cache callbacks can't be executed in a late() event, the output is now staggered to output the fitness values one generation post expectation as an early() event.

The update to vcf_output negates the need for previous modifications in terms of incorporating metadata directly into the vcf file, but has also introduced problems for subsetting. Presently, the function will not run on subsets of data, but all our output is technically a subset since we're partitioning the data by time (pre and post environmental shift)

The most recent version of the single locus SLiM model with the common garden output implemented has been named "Single_m0.05_CG.slim"

## 20191015
The Pyslim code "TSR_time_AJL.py" has been updated to reflect the new vcf_output code. Individual names are now generated and output with some basic metadata from SLiM (although not all) to the vcf file - will re-incorporate the addition of the SLiM mutation type code I'd previously gotten to work soon.

## 20191016
The pipeline is just about sorted, here below are examples of most recent outputs from a run using the new SLiM and Pyslim code, with updated  R code to reflect the difference in the VCF file.

![image](https://github.com/TestTheTests/TTT_Offset_Vulnerability_GF_Sims/blob/master/Notebook/img/New_batch_Freq_20191016.png)
![image](https://github.com/TestTheTests/TTT_Offset_Vulnerability_GF_Sims/blob/master/Notebook/img/New_batch_Fit_20191016.png)

Looks appropriately the same as before. 
Comparing the output of the GF calculation with the common garden relative fitness output _prior_ to the environmental shift (Generation 300) we get the following:
![image](https://github.com/TestTheTests/TTT_Offset_Vulnerability_GF_Sims/blob/master/Notebook/img/Home_Transplant.png)

At Generation 300 there is no allele under selection present in the H1 population and it's very rare in the left hand side of the population matrix, so there's no change in fitness for those populations across the environment. 

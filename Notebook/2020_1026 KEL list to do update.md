# 20200929 KEL list of thoughts

## Update with notes from oct 26 meeting

* Check the 4-Case Barplot. Some bars seem to be plotting from 0 to the max, while other
bars are plotting the range of values
* Find Lind and Aitken's paper on using GWAS/GEA methods to predict fitness in common garden and which
environments are more important
* Since we can't confirm the linearity assumptions for Pearson's correlation coefficient,
make sure to use Spearman's rank correlation for the assessment in the 4-Case Barplot
* Slope vs. Correlation - we discussed how different common gardens may have the same correlation, 
but different relationships between fitness and GF-offset. We agreed to report the correlation in the manuscript,
but to add a few plots just to illustrate the shape of the relationship and how it changes across core vs. edge pops
* Number of environments - We decided to add 12 environments (2 that are highly correlated with the causal envi, 
and 10 generated from a covariance matrix, see Katie's R code),
* Fix the MD calculation

* Aki reported that he fixed the code to have the same genotypes transplanted into each common garden
* Other things I havenâ€™t seen results for but are still on the list include: * show that the amount of LA in each scenario ~ equal


## Update with notes from oct 10 meeting

### Link to Matt and Steve's GF paper: https://www.authorea.com/users/353673/articles/477462-experimental-support-for-genomic-prediction-of-climate-maladaptation-using-the-machine-learning-approach-gradient-forests

* Make sure we have got the code right
	* "Genotype" = source population
	* "CG_loc" = common garden location
	* Fitness is for the *Genotype* in the *CG_loc*
	* The distances are based on the distance between the common garden environment
	and the genotype's home environment
	* write a post that confirms how the fitnesses are calculated in SLiM *

* Check the MD calculation 
	* previously we found that environmental distance did as well as GF in case 1. 
	* in new calculations, the Md has a MUCH lower correlation. Most likely a calculation error here.
	
* Check the common garden conditions - the same ORIGIN genotypes should be in each common garden
	* Make sure the SAME genotypes are transplanted into ALL common garden locations
		* all 100? (too slow)
		* only edge and core genotypes into each common garden?
	* Average correlation for core common gardens vs. edge common gardens
	* HOME IS ORIGIN
		* Make sure who is in this list is the same for the core vs. the edge common gardens
	* TRANSPLANT IS COMMON GARDEN

* Make sure environments are standardized for all analyses? Check with Matt on this. I'm not sure if it matters that we use Ed vs. Md, if we standardize them the distances are pretty similar.
	* Aki said he wrote the code, but didn't incorporate into the pipeline yet
	* OK, after discussion in Oct 12 meeting, Matt says that we shouldn't scale/standardize the environments. GF is a wrapper on RF.
	* Steve compared it to multivariate linear regression, you would want to scale the predictor variables. That rule of thumb isn't applicable here.
	* If we don't standardize the environments, we'll want Md for environmental distance

* MAF filtering

* show that the amount of LA in each scenario ~ equal

* correlation vs. slopes. For comparison, we measure the correlation between fitness and some predictor (e.g. GFoffset) across common garden environments. However, one could argue that even if the correlation was the same for two different common gardens, if the SLOPE was different this would be problematic for implementing GF in a restoration context and/or comparing across populations.
	* Steve - correlation between fitness proxy and offset changes in slope and magnitude when using different sets of loci. If you have causal loci, they generate larger offset values, and it flattens the slope out because the fitness proxy is being stretched across larger values. On a putatively neutral set, the max offset is relatively small, and results in larger slope.
	* Just output it in case it comes up in peer review

* Case 2: Mountain Range.
This was set up as a single linear environment, and a single mountain range environment.
Do we want a double mountain range environment?
	* We think this is OK, as long as it has diffferent results from Case 1.


